{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
      "RSVaultName": {
        "type": "string",
        "metadata": {
          "description": "Name of the Recovery Services Vault"
        }
      },
      "SystemManagedID": {
        "type": "string",
        "metadata": {
          "description": "System Managed ID"
        }
      },      
      "roleAssignmentGuid": {
        "type": "string",
        "metadata": {
          "description": "A new GUID used to identify the role assignment"
        }
      },      
      "location": {
          "type": "string",
        "metadata": {
          "description": "Region of Resources"
        }
      }
    },
  "variables": {
    "skuName":  "Standard",
    "RoleDefinitionID": "[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/', 'b24988ac-6180-42a0-ab88-20f7382dd24c')]"    
  },    
    "resources": [
        {
            "type": "Microsoft.RecoveryServices/vaults",
            "apiVersion": "2016-06-01",
            "name": "[parameters('RSVaultName')]",
            "location": "[parameters('location')]",
            "tags": {
            },
            "properties": {},
            "sku": {
                "name": "RS0",
                "tier": "[variables('skuName')]"          
            }
        },
        {
            "type": "Microsoft.Authorization/roleAssignments",
            "apiVersion": "2018-09-01-preview",
            "name": "[parameters('roleAssignmentGuid')]",
            "scope": "[concat('Microsoft.RecoveryServices/vaults', '/', parameters('RSVaultName'))]",
            "dependsOn": [
              "[parameters('RSVaultName')]"
            ],                      
            "properties": {
              "roleDefinitionId": "[variables('RoleDefinitionId')]",
              "principalId": "[parameters('SystemManagedID')]"
            }
        }        
    ]
  }